---
title: "ã€ã‚‚ã‚Šã‘ã‚“å¡¾ @JSèª²é¡Œ25ã€‘ä¼šå“¡ç™»éŒ²ãƒšãƒ¼ã‚¸ã®ä½œæˆ ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹"
date: "2022-02-07"
categories: 
  - "javascript"
tags: 
  - "javascript"
  - "js_lesson"
  - "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°"
  - "morikenjuku"
  - "å­¦ç¿’è¨˜éŒ²"
coverImage: "Twitter-post-9.jpg"
---

![ç®¡ç†äºº](/images/43D8A608-67A3-48E2-9600-EFFAEB7E218E_1_201_a-150x150.jpeg)

ç®¡ç†äºº

ã“ã‚“ã«ã¡ã¯ã€ã•ãˆã¨ç”³ã—ã¾ã™ğŸ‘©â€ğŸ’»  
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ãªã‚‹ãŸã‚ã« æ—¥ã€…å‹‰å¼·ã‚’ã—ã¦ã„ã¾ã™  
ã“ã®ãƒ–ãƒ­ã‚°ã¯ ãã®å‹‰å¼·ã®è¨˜éŒ²ã¨ ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã®ãŸã‚ã«é‹å–¶ã‚’ã—ã¦ã„ã¾ã™âœ¨

  
ç¾åœ¨ã€ã‚‚ã‚Šã‘ã‚“å¡¾ã§  
[ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®æ–¹ãŒãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ãªã‚‹ç‚ºã®èª²é¡Œ](https://github.com/sae-github/handsonFrontend/blob/master/work/markup/1.md)ã«å–ã‚Šçµ„ã‚“ã§ã„ã¾ã™ã€‚  
ä»Šå›ã¯èª²é¡Œ25ã®å®Ÿè£…ã§å­¦ã‚“ã ã“ã¨ã‚’ãƒ–ãƒ­ã‚°ã¸ã¾ã¨ã‚ã¾ã™

## èª²é¡Œ25

å‰å›ã®èª²é¡Œã«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹

https://itosae.com/js\_lesson24/

ä»•æ§˜

- åˆå›ã¯é€ä¿¡ãƒœã‚¿ãƒ³ã¨ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¯disabledçŠ¶æ…‹ã€‚
- ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯16æ–‡å­—æœªæº€ã¨ã—ã€  
    ã‚‚ã—invalidãªã‚‰ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯ ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯15æ–‡å­—ä»¥ä¸‹ã«ã—ã¦ãã ã•ã„ã€‚ã€
- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ä¸€èˆ¬çš„ãªãƒ¡ãƒ¼ãƒ«å½¢å¼ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«ã—ã¦ãã ã•ã„ã€‚  
    ã‚‚ã—invalidãªã‚‰ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯ã€Œãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å½¢å¼ã«ãªã£ã¦ã„ã¾ã›ã‚“ã€‚ã€
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¯8æ–‡å­—ä»¥ä¸Šã®å¤§å°ã®è‹±æ•°å­—ã‚’äº¤ãœãŸã‚‚ã®ã¨ã—ã€  
    ã‚‚ã—invalidãªã‚‰ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯ã€Œ8æ–‡å­—ä»¥ä¸Šã®å¤§å°ã®è‹±æ•°å­—ã‚’äº¤ãœãŸã‚‚ã®ã«ã—ã¦ãã ã•ã„ã€‚ã€
- åˆ©ç”¨è¦ç´„ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å®Ÿè£…ã«ä½µã›ã¦ã€ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®disabledã¯å¤–ã—ã€checkedã«ãªã‚‹([å‰å›å®Ÿè£…éƒ¨åˆ†](https://itosae.com/js_lesson24/))
- å…¨ã¦ã®å…¥åŠ›ãŒvalidã®å ´åˆã«ã®ã¿é€ä¿¡ãƒœã‚¿ãƒ³ã®disabledãŒfalseã«ãªã‚ŠæŠ¼ä¸‹ã§ãã€`register-done.html`ã«é·ç§»ã§ãã‚‹ã€‚

### åˆ¶ä½œç‰©

ãƒ»validæ™‚

[![Image from Gyazo](/images/2355e9821d03d96c07e811cc95e23fe3.gif)](https://gyazo.com/2355e9821d03d96c07e811cc95e23fe3)

ãƒ»invalidæ™‚

[![Image from Gyazo](/images/2026f34252378a23fc5f6004f50d9ae7.gif)](https://gyazo.com/2026f34252378a23fc5f6004f50d9ae7)

https://codesandbox.io/s/lesson24-moufq

## ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

https://developer.mozilla.org/ja/docs/Learn/Forms/Form\_validation

### ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®æ­£è¦è¡¨ç¾

inputã®typeå±æ€§ãŒemailã®å ´åˆã€ä»¥ä¸‹ã®æ­£è¦è¡¨ç¾ãŒé©ç”¨ã•ã‚Œã‚‹ãã†ã§ã™  
ã“ã‚Œã‚’èª¿ã¹ã¦ è§£èª­ã—ã¦ã¿ã¦ã¿ã¾ã™...

```
/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/
```

https://html.spec.whatwg.org/multipage/input.html#email-state-(type=email)

  

![ã‚ãŸã—](/images/43D8A608-67A3-48E2-9600-EFFAEB7E218E_1_201_a-150x150.jpeg)

ã‚ãŸã—

é•·ã‚ãªã®ã§ã€åˆ†å‰²ã—ã¦èª¿ã¹ã¦ã„ãã¾ã™

(â€» èª¤ã‚ŠãŒã‚ã‚Œã°æ•™ãˆã¦é ‚ããŸã„ã§ã™...ã¨ã£ã¦ã‚‚è‡ªä¿¡ãŒãªã„ï¼ï¼)

@ãƒãƒ¼ã‚¯ã®å‰ã« \[ \] å†…ã® è¨˜å·ã‚’å«ã‚€è‹±æ•°å­—ãŒ1æ–‡å­—ä»¥ä¸Šã‚ã‚Œã° ãƒãƒƒãƒã™ã‚‹

```
^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@
```

\[a-zA-Z0-9\]ã®ã„ãšã‚Œã‹ä¸€æ–‡å­—ã€  
\[a-zA-Z0-9-\] 0ã€œ61å­—ã€\[a-zA-Z0-9\]ã®ã„ãšã‚Œã‹ã«0ã¾ãŸã¯1ä»¥ä¸Šã«ä¸€è‡´ã™ã‚‹

```
[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?
```

.(ãƒ‰ãƒƒãƒˆ)ã®å¾Œã«ç¶šã\[a-zA-Z0-9\]ã„ãšã‚Œã‹ä¸€æ–‡å­—ã€  
\[a-zA-Z0-9-\] 0ã€œ61å­—ã€\[a-zA-Z0-9\]ã®ã„ãšã‚Œã‹ã« 0ã¾ãŸã¯1æ–‡å­—ä»¥ä¸Šã«ä¸€è‡´ã™ã‚‹

```
(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$
```

ã¤ã¾ã‚Šã€ï¼ ãƒãƒ¼ã‚¯ ã®å‰ã«\[a-zA-Z0-9.!#$%&'\*+\\/=?^\_\`{|}~-\]ãŒ1æ–‡å­—ä»¥ä¸Šã‚ã‚Šã€  
@ãƒãƒ¼ã‚¯ã®å¾Œã«ã‚‚1æ–‡å­—ä»¥ä¸Šã®æ±ºã¾ã£ãŸè‹±æ•°å­—ãŒã‚ã‚Œã°ä¸€è‡´ã™ã‚‹ã€‚

ã¾ãŸ.(ãƒ‰ãƒƒãƒˆ)ã®å¾Œã«ã¯ä¸€æ–‡å­—ä»¥ä¸Šã®è‹±æ•°å­—ãŒã‚ã‚Œã°ãã‚Œã‚‚ä¸€è‡´ã™ã‚‹...ã¨ã„ã†ã“ã¨ã ã¨è§£é‡ˆã—ã¾ã—ãŸ

### ä»Šå› å®Ÿè£…ã—ãŸæ­£è¦è¡¨ç¾

ä»Šå›ã¯èª²é¡Œã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šã€è‡ªåˆ†ã§æ­£è¦è¡¨ç¾ã‚’æ›¸ã„ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸ  
@ãƒãƒ¼ã‚¯ã®å‰ã«ã¯``[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]``ãŒä¸€æ–‡å­—ä»¥ä¸Šã‚ã‚‹ã“ã¨ã€  
@ãƒãƒ¼ã‚¯ã®å¾Œã«ã‚‚`[a-zA-Z0-9-]`ãŒä¸€æ–‡å­—ä»¥ä¸Šã€.(ãƒ‰ãƒƒãƒˆ)ã®ã‚ã¨ã«`[A-Za-z]`ãŒä¸€æ–‡å­—ä»¥ä¸Šã‚ã‚Œã°ãƒãƒƒãƒã—ã¾ã™ã€‚  
ã¾ãŸã€`(\.[A-Za-z]+?)?`ã®éƒ¨åˆ†ã§ã¯.(ãƒ‰ãƒƒãƒˆ)ã®å¾Œã« `[A-Za-z]`ãŒ1æ–‡å­—ä»¥ä¸Šã‚ã‚Œã°ãƒãƒƒãƒã™ã‚‹ã¨è¡¨ç¾ã—ã¾ã—ãŸ

```
/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+\.[A-Za-z]+(\.[A-Za-z]+?)?$/g
```

### ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®æ­£è¦è¡¨ç¾

ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®æ¡ä»¶ã€**8æ–‡å­—ä»¥ä¸Šã®å¤§å°ã®è‹±æ•°å­—ã‚’äº¤ãœãŸã‚‚ã®** ã‚’ä»¥ä¸‹ã®æ­£è¦è¡¨ç¾ã§å®Ÿè£…ã—ã¾ã—ãŸ

```
 /^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])[a-zA-Z0-9]{8,}$/g
```

### æ­£è¦è¡¨ç¾ã®ãƒã‚§ãƒƒã‚¯

ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’`test()`ã—ã€ãƒãƒƒãƒã—ã¦ã„ã‚‹ã‹ã‚’booleanã§è¿”ã—ã¾ã™  
ã“ã“ã§ã¯ã€ãƒãƒƒãƒã—ã¦ã„ãŸã‚‰falseã‚’è¿”ã—ã€ãƒãƒƒãƒã—ã¦ã„ãªã‹ã£ãŸã‚‰trueã§è¿”ã™æ§˜ã«ã—ã¦ã„ã¾ã™

```
const isValidInRegex = (constraint, value) => constraint.test(value) ? false : true;
```

### æ–‡å­—æ•°ã®åˆ¶é™

å¼•æ•°ã« å…¥åŠ›ã—ãŸå€¤ã¨æœ€å¤§æ•°ãŒæ¸¡ã‚Šã€æ¼”ç®—å­ã‚’ä½¿ç”¨ã—booleanã‚’è¿”ã—ã¾ã™

```
const isLimitTextLength = (value, limit) => value.length >= limit;
```

### å…¥åŠ›ã®æœ‰ç„¡

å¼•æ•°ã¸ å…¥åŠ›ã—ãŸå€¤ãŒæ¸¡ã‚Š`trim()`ã§ä¸¡ç«¯ã®ç©ºç™½ã‚’å‰Šé™¤ã—ã€å€¤ãŒç©ºã§ã‚ã‚Œã°trueã‚’è¿”ã—ã¾ã™

```
const isBlankInInput = (value) => value.trim() === "";
```

### ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¾ã¨ã‚ã‚‹

ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹... ãã‚Œãã‚Œã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã—ã¾ã—ãŸ  
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¨ invalidã ã£ãŸæ™‚ã«è¡¨ç¤ºã—ãŸã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãã‚Œãã‚Œæ ¼ç´ã—ã¦ã„ã¾ã™

```
const constraint = {
  username: {
    validation: () => {
      return isLimitTextLength(userName.value, 16);
    },
    invalidMessage: "ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯15æ–‡å­—ä»¥ä¸‹ã«ã—ã¦ãã ã•ã„ã€‚"
  },
  email: {
    validation: () => {
      const reg = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+\.[A-Za-z]+(\.[A-Za-z]+?)?$/g;
      return isValidInRegex(reg, email.value);
    },
    invalidMessage: "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å½¢å¼ã«ãªã£ã¦ã„ã¾ã›ã‚“"
  },
  password: {
    validation: () => {
      const reg = /^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])[a-zA-Z0-9]{8,}$/g;
      return isValidInRegex(reg, password.value);
    },
    invalidMessage: "8æ–‡å­—ä»¥ä¸Šã®å¤§å°ã®è‹±æ•°å­—ã‚’äº¤ãœãŸã‚‚ã®ã«ã—ã¦ãã ã•ã„ã€‚"
  }
};
```

### å®Ÿè¡Œ

å¼•æ•°ã®fieldã«ã¯ã‚¤ãƒ™ãƒ³ãƒˆãŒèµ·ããŸinputè¦ç´ ãŒæ¸¡ã£ã¦ãã¾ã™

â‘  ç©ºã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹  
\-> ç©ºã§ã‚ã‚Œã° "æœªå…¥åŠ›ã§ã™"ã¨è¡¨ç¤ºã•ã‚Œã€æ—©æœŸãƒªã‚¿ãƒ¼ãƒ³  
\-> ç©ºã§ãªã‘ã‚Œã°â‘¡ã¸

â‘¡ ãã‚Œãã‚Œã®inputã‚¿ã‚¤ãƒ—ã«ã‚ˆã‚‹ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯(ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®validationã‚’å®Ÿè¡Œã™ã‚‹)  
inputè¦ç´ ã«ã¯idãŒä»˜ä¸ã•ã‚Œã¦ã„ã¦ã€idåã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚­ãƒ¼ã¨ä¸€è‡´ã—ã¾ã™ã€‚  
`constraint[field.id].validation()` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ `[field.id]`ã«ã¯ã‚¤ãƒ™ãƒ³ãƒˆãŒèµ·ããŸè¦ç´ ã®idãŒå…¥ã‚‹ã®ã§ã€ãƒ¦ãƒ¼ã‚¶åã§ã‚ã‚Œã°`[username]`ã¨ãªã‚‹ã€‚  
\-> invalidã§ã‚ã‚Œã°ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«æ ¼ç´ã—ãŸinvalidMessageãŒè¡¨ç¤ºã•ã‚Œã€return  
\-> validã§ã‚ã‚Œã° â‘¢ã¸

â‘¢ å…¥åŠ›ã•ã‚ŒãŸå€¤ã¯ç©ºã§ã‚‚ãªãã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚é€šã£ãŸã®ã§trueã‚’è¿”ã™

```
const checkFieldValidation = (field) => {
  if (isBlankInInput(field.value)) {
    addInvalidMessage(field, "æœªå…¥åŠ›ã§ã™");
    return false;
  }

  if (constraint[field.id].validation()) {
    addInvalidMessage(field, constraint[field.id].invalidMessage);
    return false;
  }

  return true;
};
```

## submitãƒœã‚¿ãƒ³ã®disabledåˆ‡ã‚Šæ›¿ãˆ

submitãƒœã‚¿ãƒ³ã¯ã€å…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å…¥åŠ›ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒæœ‰åŠ¹ã§  
ãªãŠã‹ã¤ checkboxãŒcheckedã®å ´åˆã« disabledã‚’falseã«åˆ‡ã‚Šæ›¿ãˆã¾ã™

ä»¥ä¸‹ã®`checkAllInputs()`ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«æ ¼ç´ã—ã¦ã‚ã‚‹ã™ã¹ã¦ã®fieldã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™

```
const checkAllInputs = () => {
  return Object.keys(constraint).every((key) => {
    const fieldElement = document.getElementById(key).value;
    return isBlankInInput(fieldElement) || constraint[key].validation() ? false : true;
  });
};
```

`every()`ã‚’ä½¿ç”¨ã— IDã‚’ã‚‚ã¨ã«inputãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¸ã®å…¥åŠ›å€¤ã‚’å–å¾—ã—ã¾ã™ã€  
ç©ºã§ã¯ãªã„ã‹ï¼Ÿãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¯é€šã£ãŸã‹ï¼Ÿã‚’booleanã§è¿”ã—ã¾ã™

  
`every()`ã¯ã€é…åˆ—å†…ã®è¦ç´ ã«å¯¾ã—ã¦callbacké–¢æ•°ã‚’å®Ÿè¡Œã— ãã®çµæœã‚’booleanã§è¿”ã—ã¾ã™  
çµæœãŒfalseã«ãªã£ãŸæ®µéšã§ callbackã¯falseã‚’è¿”ã— ãã®å¾Œã®è¦ç´ ã«å¯¾ã—ã¦ã¯ãƒ†ã‚¹ãƒˆã¯ã—ãªã„ãƒ¡ã‚½ãƒƒãƒ‰

https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global\_Objects/Array/every

## invalid ï¼† valid ã®æ™‚ã®å¤‰åŒ–

è¨˜äº‹å†’é ­ã®åˆ¶ä½œç‰©ã‚’è¦‹ã‚Œã°ã‚ã‹ã‚‹æ§˜ã«  
ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒæœ‰åŠ¹ã‹ç„¡åŠ¹ã‹....ãã‚Œãã‚Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä¼ã‚ã‚‹æ§˜ã«ã—ã¾ã—ãŸ

validæ™‚ã«ã¯ã‚¯ãƒ©ã‚¹ã‚’ä»˜ä¸ã— ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ ç·šã‚’ç·‘ã«ã—ã€å…¥åŠ›ãŒæœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹æ§˜ã«ã—ã¾ã—ãŸ

```
const addValidClassName = (target) => {
  const parent = target.parentElement;
  parent.classList.add("valid");
};
```

```
.register-form__field.valid input {
  border-color: #09c372;
}
```

invalidã®éš›ã‚‚ã€ã‚¯ãƒ©ã‚¹ã‚’ä»˜ä¸ã—æ ç·šã¯èµ¤ã«ã—ã¾ã™ã€‚ã¾ãŸã€ãªãœinvalidãªã®ã‹ã‚‚ã‚ã‹ã‚‹æ§˜ã« ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ä¸‹ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ ã—ã¾ã™

```
const addInvalidMessage = (target, message) => {
  const parent = target.parentElement;
  parent.classList.add("invalid");
  const el = document.createElement("span");
  el.classList.add("invalid-message");
  el.textContent = message;
  parent.appendChild(el);
};
```

```
.register-form__field.invalid input {
  border-color: #ff3860;
}
```

## ã‚¤ãƒ™ãƒ³ãƒˆã®ã‚¿ã‚¤ãƒ—ã®é•ã„ã¨ä½¿ã„åˆ†ã‘

ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã„ãŸã ãå‰ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ ä»¥ä¸‹ã®æ§˜ã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’å®šç¾©ã—ã¦ã„ã¾ã—ãŸ

```
form.addEventListener("input", (e) => {
  const targetField = e.target;
  targetField.id !== "check-box" && addValidationMessage(targetField);
  if (checkAllInputs() && checkBox.checked) {
    submitButton.disabled = false;
  } else {
    submitButton.disabled = true;
  }
});
```

<form>ã«å¯¾ã—ã¦inputã‚¤ãƒ™ãƒ³ãƒˆã‚’å®šç¾©ã—ã€eventã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰targetã‚’å–å¾—ã€‚  
targetã«å¯¾ã—ã¦ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã€ã•ã‚‰ã«ä»–ã®inputè¦ç´ ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒã‚§ãƒƒã‚¯ãŒèµ°ã‚Š  
æœ€çµ‚çš„ã«checkboxãŒcheckedã®å ´åˆã«submitãƒœã‚¿ãƒ³ã®disabledãŒåˆ‡ã‚Šæ›¿ã‚ã‚Šã¾ã™

inputã‚¤ãƒ™ãƒ³ãƒˆã¯valueã®å¤‰æ›´ã®ãŸã³ã«ç™ºç”Ÿã™ã‚‹ç‚ºã€ä¸€æ–‡å­—å…¥åŠ›ã™ã‚‹ã ã‘ã§ã€ä¸Šè¨˜ã®å‡¦ç†ãŒèµ°ã‚Šã¾ã™

https://developer.mozilla.org/ja/docs/Web/API/HTMLElement/input\_event

  
bluræ™‚ã«ç‰¹å®šã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€  
focusæ™‚ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¤–ã™ã¨ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè‰¯ããªã‚‹ã¨ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’é ‚ãã¾ã—ãŸ  
é ‚ã„ãŸãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã‚‚ã¨ã«ä¿®æ­£ã‚’ãŠã“ãªã„ã¾ã—ãŸ  
  
inputãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã”ã¨ã« ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨­å®šã—ã¾ã—ãŸ

```
password.addEventListener("blur", setInputFieldEvent);
email.addEventListener("blur", setInputFieldEvent);
userName.addEventListener("blur", setInputFieldEvent);
checkBox.addEventListener("change", switchDisabledInCheckbox);
userName.addEventListener("focus", resetInputField);
email.addEventListener("focus", resetInputField);
password.addEventListener("focus", resetInputField);
```

inputãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å¯¾ã—ã¦ã€blurã‚¤ãƒ™ãƒ³ãƒˆã‚’å®šç¾©ã—ã¦ã„ã¾ã™  
ã‚¤ãƒ™ãƒ³ãƒˆãŒèµ·ã“ã‚‹ã¨ å¯¾è±¡è¦ç´ ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ãŒå®Ÿè¡Œã•ã‚Œã€  
true(valid)ã§ã‚ã‚Œã° å…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒèµ°ã‚‹æ§˜ã«ã—ã¾ã—ãŸ  
false(invalid)ã®å ´åˆã¯ã€submitButtonã®disabledã¯true(ç„¡åŠ¹åŒ–)ã«ãªã‚Š ãã“ã§å‡¦ç†ã¯çµ‚ã‚ã‚Šã¾ã™

```
const setInputFieldEvent = (e) => {
  if (checkFieldValidation(e.target)) {
    addValidClassName(e.target);
    switchDisabledInCheckbox();
  } else {
    submitButton.disabled = true;
  }
};
```

```
const switchDisabledInCheckbox = () => {
  submitButton.disabled = checkAllInputs() && checkBox.checked ? false : true;
};
```

focusã‚¤ãƒ™ãƒ³ãƒˆã§ã¯ valid(or invalid)ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®removeã‚’å®Ÿè¡Œã—ã¾ã™

```
const resetInputField = (e) => {
  const className = ["invalid", "valid"];
  e.target.parentElement.classList.remove(...className);
  const errorMessage = e.target.parentElement.querySelector(".invalid-message");
  errorMessage && errorMessage.remove();
};
```

  
ä»Šå›ä»•æ§˜ã—ãŸã‚¤ãƒ™ãƒ³ãƒˆã®ãã‚Œãã‚Œã®é•ã„

<table><tbody><tr><td>blur</td><td>ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’å¤±ã£ãŸã¨ãã«ç™ºç”Ÿã™ã‚‹ã€‚ãƒãƒ–ãƒªãƒ³ã‚°ã—ãªã„</td></tr><tr><td>change</td><td>&lt;input&gt;&lt;select&gt;&lt;textarea&gt;è¦ç´ ã®å€¤ã®å¤‰æ›´ãŒç¢ºå®šã—ãŸéš›ã«ç™ºç”Ÿã™ã‚‹ãŒ<br>è¦ç´ ã®ç¨®é¡ãªã©ã«ã‚ˆã£ã¦ç™ºç”Ÿæ¡ä»¶ã¯å¤‰å‹•ã€‚<br>checkboxã¯ :checkedã«ãªã£ãŸå ´åˆã«ç™ºç”Ÿã™ã‚‹</td></tr><tr><td>focus</td><td>ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã«ç™ºç”Ÿã€‚ãƒãƒ–ãƒªãƒ³ã‚°ã—ãªã„</td></tr></tbody></table>

## ã¾ã¨ã‚

ä»Šå›ã¯Vanilla JSã§formãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè£…ã‚’è¡Œã„ã¾ã—ãŸï¼

ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¯ Webã‚µã‚¤ãƒˆã‚„ã€ã‚¢ãƒ—ãƒªã§ã‚ˆãã¿ã‚‹ãƒ‘ãƒ¼ãƒ„ã§ã™ãŒ  
ã„ã–å®Ÿè£…ã™ã‚‹ã¨ãªã‚‹ã¨ã€é…æ…®ã™ã‚‹ã“ã¨ãŒãŸãã•ã‚“ã‚ã‚‹ã¨æ„Ÿã˜ã¾ã—ãŸã€‚  
æ­£è¦è¡¨ç¾ã‚‚å°‘ã—ãšã¤ã§ã™ãŒã€è‹¦æ‰‹æ„è­˜ãŒè–„ã‚Œã¦ãã¾ã—ãŸ  
  
ä»Šå›ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã—ã¦ãã‚ŒãŸ  
[ã‚‚ãªã‹ã•ã‚“](https://twitter.com/ruby443n)ã€[ã‚‚ã‚Šã‘ã‚“å…ˆç”Ÿ](https://twitter.com/terrace_tech) ...ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸãƒ¾(\*Â´âˆªï½€\*)ï¾‰"

* * *

ã‚‚ã‚Šã‘ã‚“å¡¾ã§JavaScriptã‚’å­¦ç¿’ã‚’ã—ã¦ã„ã¾ã™ï¼  
ã‚‚ã‚Šã‘ã‚“å…ˆç”Ÿã®Twitterï¼š[https://twitter.com/terrace\_tech](https://twitter.com/terrace_tech)

https://kenjimorita.jp/
